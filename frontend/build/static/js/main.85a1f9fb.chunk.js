(this["webpackJsonphostel-app"]=this["webpackJsonphostel-app"]||[]).push([[0],{145:function(e,t,a){},247:function(e,t,a){},249:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(22),c=a.n(n),r=(a(145),a(11)),o=a(67),d=a(135),l=a(134);const i="STUDENT_LIST_REQUEST",j="STUDENT_LIST_SUCCESS",b="STUDENT_LIST_ERROR",h="STUDENT_ADD_REQUEST",u="STUDENT_ADD_SUCCESS",O="STUDENT_ADD_ERROR",p="STUDENT_DETAILS_REQUEST",x="STUDENT_DETAILS_SUCCESS",g="STUDENT_DETAILS_ERROR",m="STUDENT_UPDATE_REQUEST",y="STUDENT_UPDATE_SUCCESS",E="STUDENT_UPDATE_ERROR",S="STUDENT_UPDATE_RESET",v="STUDENT_DELETE_REQUEST",f="STUDENT_DELETE_SUCCESS",T="STUDENT_DELETE_ERROR",N="STUDENT_ROOM_NO_REQUEST",_="STUDENT_ROOM_NO_SUCCESS",C="STUDENT_ROOM_NO_ERROR";var I=a(19),A=a.n(I);const L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return async(a,s)=>{try{a({type:i});const{userLogin:{userInfo:n}}=s(),c={headers:{Authorization:"Bearer ".concat(n.token)}},{data:r}=await A.a.get("/student/all?keyword=".concat(e,"&pageNumber=").concat(t),c);a({type:j,payload:r})}catch(n){a({type:b,payload:n.response&&n.response.data.message?n.response.data.message:n.message})}}},U=e=>async(t,a)=>{try{t({type:m});const{userLogin:{userInfo:s}}=a(),n={headers:{Authorization:"Bearer ".concat(s.token)}},{data:c}=await A.a.put("/student/".concat(e._id),e,n);t({type:y,payload:c})}catch(s){t({type:E,payload:s.response&&s.response.data.message?s.response.data.message:s.message})}},R="USER_LOGIN_REQUEST",D="USER_LOGIN_SUCCESS",k="USER_LOGIN_FAIL",w="USER_LOGOUT",F="USER_REGISTER_REQUEST",G="USER_REGISTER_SUCCESS",P="USER_REGISTER_FAIL",B="USER_DETAILS_REQUEST",z="USER_DETAILS_SUCCESS",M="USER_DETAILS_FAIL",H="USER_DETAILS_RESET",Q="USER_UPDATE_PROFILE_REQUEST",J="USER_UPDATE_PROFILE_SUCCESS",Y="USER_UPDATE_PROFILE_FAIL",V="USER_UPDATE_PROFILE_RESET",q="USER_LIST_REQUEST",W="USER_LIST_SUCCESS",K="USER_LIST_FAIL",X="USER_LIST_RESET",Z="USER_DELETE_REQUEST",$="USER_DELETE_SUCCESS",ee="USER_DELETE_FAIL",te="USER_UPDATE_REQUEST",ae="USER_UPDATE_SUCCESS",se="USER_UPDATE_FAIL",ne="USER_UPDATE_RESET",ce="ATTENDANCE_DATA_ENTER_REQUEST",re="ATTENDANCE_DATA_ENTER_SUCCESS",oe="ATTENDANCE_DATA_ENTER_FAIL",de="ATTENDANCE_ANALYSIS_REQUEST",le="ATTENDANCE_ANALYSIS_SUCCESS",ie="ATTENDANCE_ANALYSIS_FAIL",je="ATTENDANCE_ANALYSIS_RESET",be="ATTENDANCE_DELETE_REQUEST",he="ATTENDANCE_DELETE_SUCCESS",ue="ATTENDANCE_DELETE_FAIL",Oe=Object(o.combineReducers)({studentsList:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{students:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return{...e,loading:!0};case j:return{loading:!1,students:t.payload.students,pages:t.payload.pages,page:t.payload.page};case b:return{loading:!1,error:t.payload};default:return e}},studentDetails:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return{...e,loading:!0};case x:return{loading:!1,student:t.payload};case g:return{loading:!1,error:t.payload};default:return e}},studentAdd:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{students:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return{...e,loading:!0};case u:return{loading:!1,success:!0};case O:return{loading:!1,error:t.payload};default:return e}},studentUpdate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return{...e,loading:!0};case y:return{loading:!1,success:!0};case E:return{loading:!1,error:t.payload};case S:return{};default:return e}},studentDelete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return{...e,loading:!0};case f:return{loading:!1,success:!0};case T:return{loading:!1,error:t.payload};case"STUDENT_DELETE_RESET":return{};default:return e}},getStudentsByRoomNo:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return{...e,loading:!0};case _:return{loading:!1,students:t.payload.students,attendance:t.payload.attendance};case C:return{loading:!1,error:t.payload};case"STUDENT_ROOM_NO_RESET":return{};default:return e}},userLogin:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return{loading:!0};case D:return{loading:!1,userInfo:t.payload};case k:return{loading:!1,error:t.payload};case w:return{};default:return e}},userRegister:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return{loading:!0};case G:return{loading:!1,userInfo:t.payload};case P:return{loading:!1,error:t.payload};case w:return{};default:return e}},userDetails:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return{...e,loading:!0};case z:return{loading:!1,user:t.payload};case M:return{loading:!1,error:t.payload};case H:return{user:{}};default:return e}},userUpdateProfile:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return{loading:!0};case J:return{loading:!1,success:!0,userInfo:t.payload};case Y:return{loading:!1,error:t.payload};case V:return{};default:return e}},userList:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return{loading:!0};case W:return{loading:!1,users:t.payload};case K:return{loading:!1,error:t.payload};case X:return{users:[]};default:return e}},userDelete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return{loading:!0};case $:return{loading:!1,success:!0};case ee:return{loading:!1,error:t.payload};default:return e}},userUpdate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return{loading:!0};case ae:return{loading:!1,success:!0};case se:return{loading:!1,error:t.payload};case ne:return{user:{}};default:return e}},attendanceDataEnter:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return{...e,loading:!0};case re:return{loading:!1,attendance:t.payload};case oe:return{loading:!1,error:t.payload};case"ATTENDANCE_DATA_ENTER_RESET":return{};default:return e}},attendanceAnalysis:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return{loading:!0};case le:return{loading:!1,attendance:t.payload};case ie:return{loading:!1,error:t.payload};case je:return{};default:return e}},attendanceDelete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return{loading:!0};case he:return{loading:!1,success:!0};case ue:return{loading:!1,error:t.payload};case je:return{};default:return e}}}),pe={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},xe=[d.a];var ge=Object(o.createStore)(Oe,pe,Object(l.composeWithDevTools)(Object(o.applyMiddleware)(...xe))),me=a(267),ye=a(255),Ee=a(256),Se=a(136),ve=a(15),fe=a(1);var Te=e=>{let{stuentDetails:t}=e;return Object(fe.jsxs)(me.a,{className:"my-3 p-3 rounded",children:[Object(fe.jsx)(ve.Link,{to:"/student/".concat(t._id),children:Object(fe.jsx)(ye.a,{src:t.image,rounded:!0,fluid:!0})}),Object(fe.jsxs)(me.a.Body,{children:[Object(fe.jsx)(ve.Link,{to:"/student/".concat(t._id),children:Object(fe.jsx)(me.a.Title,{as:"div",children:Object(fe.jsx)("strong",{children:t.name})})}),Object(fe.jsx)(Ee.a,{children:Object(fe.jsxs)(Se.a,{children:["Room No: ",t.roomNo]})}),Object(fe.jsx)(Ee.a,{children:Object(fe.jsxs)(Se.a,{children:["Stream: ",t.category]})}),Object(fe.jsxs)(me.a.Text,{children:["Contact:",Object(fe.jsx)("a",{href:"tel:".concat(t.contact),children:t.contact})]})]})]})},Ne=a(257);var _e=()=>Object(fe.jsx)(Ne.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",margin:"auto",display:"block"},children:Object(fe.jsx)("span",{className:"sr-only",children:"Loading..."})}),Ce=a(258);const Ie=e=>{let{variant:t,children:a}=e;return Object(fe.jsx)(Ce.a,{variant:t,children:a})};Ie.defaultProps={variant:"info"};var Ae=Ie,Le=a(268),Ue=a(32);var Re=e=>{let{pages:t,page:a,isAdmin:s=!1,keyword:n=""}=e;return t>1&&Object(fe.jsx)(Le.a,{children:[...Array(t).keys()].map((e=>Object(fe.jsx)(Ue.LinkContainer,{to:s?"/page/".concat(e+1):n?"/search/".concat(n,"/page/").concat(e+1):"/page/".concat(e+1),children:Object(fe.jsx)(Le.a.Item,{active:e+1===a,children:e+1})},e+1)))})},De=a(260),ke=a(261),we=a(262),Fe=a(259);var Ge=e=>{let{keyword:t,pageNumber:a}=e;const n=Object(r.b)(),c=Object(r.c)((e=>e.studentsList)),{loading:o,error:d,students:l,page:i,pages:j}=c;return Object(s.useEffect)((()=>{l||n(L(t,a))}),[n,t,a]),Object(fe.jsx)(fe.Fragment,{children:o?Object(fe.jsx)(_e,{}):d?Object(fe.jsx)(Ae,{variant:"danger",children:d}):Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)(Fe.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(fe.jsx)("thead",{children:Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("th",{children:"Stream"}),Object(fe.jsx)("th",{children:"NAME"}),Object(fe.jsx)("th",{children:"STATUS"}),Object(fe.jsx)("th",{children:"CONTACT"}),Object(fe.jsx)("th",{children:"ROOM NO"}),Object(fe.jsx)("th",{children:"CITY"})]})}),Object(fe.jsx)("tbody",{children:l.map((e=>Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("td",{children:e.category}),Object(fe.jsx)("td",{children:Object(fe.jsx)(ve.Link,{to:"/student/".concat(e._id),children:e.name})}),Object(fe.jsx)("td",{children:Object(fe.jsx)("span",{style:{color:"Outside"===e.status?"red":"Home"===e.status?"blue":"black"},children:e.status})}),Object(fe.jsx)("td",{children:Object(fe.jsx)("a",{href:"tel:".concat(e.contact),children:e.contact})}),Object(fe.jsx)("td",{children:e.roomNo}),Object(fe.jsx)("td",{children:e.city})]},e._id)))})]}),Object(fe.jsx)(Re,{pages:j,page:i,isAdmin:!0})]})})};var Pe=e=>{let{match:t,history:a}=e;const[n,c]=Object(s.useState)(!0),o=t.params.keyword,d=t.params.pageNumber||1,l=Object(r.c)((e=>e.userLogin)),{loading:i,userInfo:j}=l,b=Object(r.b)(),h=Object(r.c)((e=>e.studentsList)),{loading:u,error:O,students:p,page:x,pages:g}=h;return Object(s.useEffect)((()=>{i||j||a.push("/login"),b(L(o,d))}),[o,d]),Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)(De.a,{children:Object(fe.jsxs)(Ee.a,{className:"justify-content-md-center",children:[Object(fe.jsx)(Se.a,{xs:!0,lg:"2"}),Object(fe.jsx)(Se.a,{md:"auto",children:Object(fe.jsx)(ke.a,{toggle:!0,children:["Grid","Table"].map((e=>Object(fe.jsx)(we.a,{type:"radio",variant:"secondary",name:"radio",value:e,checked:(n?"Grid":"Table")===e,onChange:e=>c("Grid"===e.target.value),children:"Grid"===e?Object(fe.jsx)(fe.Fragment,{children:" Grid"}):Object(fe.jsx)(fe.Fragment,{children:" Table "})},e)))})}),Object(fe.jsx)(Se.a,{xs:!0,lg:"2"})]})})}),Object(fe.jsx)("h1",{children:"Students"}),u?Object(fe.jsx)(_e,{}):O?Object(fe.jsx)(Ae,{variant:"danger",children:O}):n?Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Ee.a,{children:p.map((e=>Object(fe.jsx)(Se.a,{sm:12,md:6,lg:4,xl:3,children:Object(fe.jsx)(Te,{stuentDetails:e})},e._id)))}),Object(fe.jsx)(Re,{pages:g,page:x,keyword:o||""})]}):Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)(Ge,{keyword:o,pageNumber:d})})]})},Be=a(18),ze=a(266),Me=a(269),He=a(263),Qe=a(265),Je=a(75);var Ye=e=>{let{history:t}=e;const[a,n]=Object(s.useState)("");return Object(fe.jsxs)(Qe.a,{onSubmit:e=>{e.preventDefault(),a.trim()?t.push("/search/".concat(a)):t.push("/")},inline:!0,children:[Object(fe.jsx)(Qe.a.Control,{type:"text",value:a,name:"q",placeholder:"Search students...",className:"mr-sm-2 ml-sm-5",onChange:e=>n(e.target.value)}),Object(fe.jsx)(Je.a,{className:"p-2",type:"submit",variant:"outline-success",children:"Search"})]})};const Ve=()=>e=>{localStorage.removeItem("userInfo"),e({type:w}),e({type:H}),e({type:X}),document.location.href="/login"},qe=e=>async(t,a)=>{try{t({type:B});const{userLogin:{userInfo:s}}=a(),n={headers:{Authorization:"Bearer ".concat(s.token)}},{data:c}=await A.a.get("/users/".concat(e),n);t({type:z,payload:c})}catch(s){const e=s.response&&s.response.data.message?s.response.data.message:s.message;"Not authorized, token failed"===e&&t(Ve()),t({type:M,payload:e})}};var We=e=>{let{history:t}=e;const a=Object(r.b)(),s=Object(r.c)((e=>e.userLogin)),{userInfo:n}=s;return Object(fe.jsx)("header",{children:Object(fe.jsx)(ze.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(fe.jsxs)(De.a,{children:[Object(fe.jsx)(Ue.LinkContainer,{to:"/",children:Object(fe.jsx)(ze.a.Brand,{children:"HostelMate"})}),Object(fe.jsx)(ze.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(fe.jsxs)(ze.a.Collapse,{id:"basic-navbar-nav",children:[Object(fe.jsx)(Be.d,{render:e=>{let{history:t}=e;return Object(fe.jsx)(Ye,{history:t})}}),Object(fe.jsxs)(Me.a,{className:"ml-auto",children:[Object(fe.jsxs)(He.a,{title:"More",children:[Object(fe.jsx)(Ue.LinkContainer,{to:"/attendance",children:Object(fe.jsx)(He.a.Item,{children:"Attendance"})}),Object(fe.jsx)(Ue.LinkContainer,{to:"/addStudent",children:Object(fe.jsx)(He.a.Item,{children:"Add Student"})}),Object(fe.jsx)(Ue.LinkContainer,{to:"/analysis",children:Object(fe.jsx)(He.a.Item,{children:"View Analysis"})})]}),n?Object(fe.jsxs)(He.a,{title:n.name,id:"username",children:[Object(fe.jsx)(Ue.LinkContainer,{to:"/profile",children:Object(fe.jsx)(He.a.Item,{children:"Profile"})}),n.isAdmin&&Object(fe.jsx)(Ue.LinkContainer,{to:"/userList",children:Object(fe.jsx)(He.a.Item,{children:"Users List"})}),Object(fe.jsx)(He.a.Item,{onClick:()=>{a(Ve()),t.push("/login")},children:"Logout"})]}):Object(fe.jsx)(Ue.LinkContainer,{to:"/login",children:Object(fe.jsxs)(Me.a.Link,{children:[Object(fe.jsx)("i",{className:"fas fa-user"})," Sign In"]})})]})]})]})})})};var Ke=()=>Object(fe.jsx)(De.a,{children:Object(fe.jsx)(Ee.a,{children:Object(fe.jsx)(Se.a,{className:"text-center py-3",children:"Copyright \xa9HostelMate"})})});var Xe=e=>{let{children:t}=e;return Object(fe.jsx)(De.a,{children:Object(fe.jsx)(Ee.a,{className:"justify-content-md-center",children:Object(fe.jsx)(Se.a,{xs:12,md:6,children:t})})})};var Ze=()=>{const e=Object(Be.k)(),[t,a]=Object(s.useState)(!1),[n,c]=Object(s.useState)(""),[o,d]=Object(s.useState)(""),[l,i]=Object(s.useState)(""),[j,b]=Object(s.useState)(""),[p,x]=Object(s.useState)(""),[g,m]=Object(s.useState)(""),[y,E]=Object(s.useState)(""),[v,f]=Object(s.useState)(""),[T,N]=Object(s.useState)(""),[_,C]=Object(s.useState)("Hostel"),I=Object(r.b)(),L=Object(r.c)((e=>e.studentAdd)),{loading:R,error:D,success:k}=L,w=Object(r.c)((e=>e.studentUpdate)),{loading:F,error:G,success:P}=w;Object(s.useEffect)((()=>{if(P&&(I({type:S}),e.push("/")),e.location.state&&e.location.state.studentProps){a(!0);const t=e.location.state.studentProps;c(t.name),d(t.address),i(t.category),b(t.city),x(t.contact),m(t.fatherContact),E(t.image),f(t.roomNo),N(t.blockNo),C(t.status)}k&&e.push("/")}),[I,e,k,P]);const B=()=>{if(!0===t){const t=e.location.state.studentProps._id;I(U({_id:t,name:n,address:o,category:l,city:j,contact:p,fatherContact:g,image:y,roomNo:v,blockNo:T,status:_}))}else I((a={name:n,address:o,category:l,city:j,contact:p,fatherContact:g,image:y,roomNo:v,blockNo:T,status:_},async(e,t)=>{try{e({type:h});const{userLogin:{userInfo:s}}=t(),n={headers:{Authorization:"Bearer ".concat(s.token)}},{data:c}=await A.a.post("/student/addStudent",a,n);e({type:u,payload:c})}catch(D){e({type:O,payload:D.response&&D.response.data.message?D.response.data.message:D.message})}}));var a};return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(ve.Link,{to:"/",className:"btn btn-light my-3",children:"Go Back"}),R||F?Object(fe.jsx)(_e,{}):Object(fe.jsxs)(fe.Fragment,{children:[G&&Object(fe.jsx)(Ae,{variant:"danger",children:G}),Object(fe.jsxs)(Xe,{children:[Object(fe.jsx)("h1",{children:t?"Edit Student":"Add Student"}),R&&Object(fe.jsx)(_e,{}),D&&Object(fe.jsx)(Ae,{variant:"danger",children:D}),Object(fe.jsx)(Qe.a,{onSubmit:B}),Object(fe.jsxs)(Qe.a.Group,{controlId:"name",children:[Object(fe.jsx)(Qe.a.Label,{children:"Name"}),Object(fe.jsx)(Qe.a.Control,{type:"name",placeholder:"Enter name",value:n,onChange:e=>c(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"status",children:[Object(fe.jsx)(Qe.a.Label,{children:"Status"}),Object(fe.jsx)(Qe.a.Control,{as:"select",value:_,onChange:e=>C(e.target.value),children:["Hostel","Outside","Home"].map((e=>Object(fe.jsx)("option",{value:e+1,children:e},e+1)))})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"address",children:[Object(fe.jsx)(Qe.a.Label,{children:"Address"}),Object(fe.jsx)(Qe.a.Control,{type:"text",placeholder:"Enter address",value:o,onChange:e=>d(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"city",children:[Object(fe.jsx)(Qe.a.Label,{children:"City"}),Object(fe.jsx)(Qe.a.Control,{type:"text",placeholder:"Enter city",value:j,onChange:e=>b(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"contact",children:[Object(fe.jsx)(Qe.a.Label,{children:"Contact"}),Object(fe.jsx)(Qe.a.Control,{type:"number",placeholder:"Enter phone number",value:p,onChange:e=>x(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"fatherContact",children:[Object(fe.jsx)(Qe.a.Label,{children:"Father Contact"}),Object(fe.jsx)(Qe.a.Control,{type:"number",placeholder:"Enter Father Phone Number",value:g,onChange:e=>m(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"roomNo",children:[Object(fe.jsx)(Qe.a.Label,{children:"Room No"}),Object(fe.jsx)(Qe.a.Control,{type:"text",placeholder:"Enter Room no",value:v,onChange:e=>f(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"b",children:[Object(fe.jsx)(Qe.a.Label,{children:"Block Number"}),Object(fe.jsx)(Qe.a.Control,{type:"text",placeholder:"Enter Block Number",value:T,onChange:e=>N(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"image",children:[Object(fe.jsx)(Qe.a.Label,{children:"Image Url"}),Object(fe.jsx)(Qe.a.Control,{type:"text",placeholder:"Enter Image Url",value:y,onChange:e=>E(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"category",children:[Object(fe.jsx)(Qe.a.Label,{children:"Category"}),Object(fe.jsx)(Qe.a.Control,{type:"text",placeholder:"Enter Stream",value:l,onChange:e=>i(e.target.value)})]}),Object(fe.jsx)(Je.a,{type:"submit",variant:"primary",onClick:B,children:t?"Update":"Add Student"})]})]})]})},$e=a(264),et=a(138),tt=a.n(et);a(177);const at=e=>async(t,a)=>{try{t({type:de});const{userLogin:{userInfo:s}}=a(),n={headers:{Authorization:"Bearer ".concat(s.token)}},{data:c}=await A.a.post("/attendance/getAnalysis",{date:e},n);t({type:le,payload:c})}catch(s){t({type:ie,payload:s.response&&s.response.data.message?s.response.data.message:s.message})}};var st=a(137);var nt=()=>{const e=Object(r.c)((e=>e.attendanceAnalysis)),{loading:t,error:a,attendance:n}=e,[c,o]=Object(s.useState)([]),[d,l]=Object(s.useState)([]);return Object(s.useEffect)((()=>{if(n){l([{label:"Name",key:"name"},{label:"Contact",key:"contact"},{label:"Room No",key:"roomNo"},{label:"Status",key:"attendance"}]);var e=[];Object.entries(n.details).map((t=>{var a={};a.name=t[1].name,a.contact=t[1].contact,a.roomNo=t[1].roomNo,a.attendance=n.data[t[0]],e.push(a)})),o(e)}}),[n]),Object(fe.jsxs)(fe.Fragment,{children:[a&&Object(fe.jsx)(Ae,{variant:"danger",children:a}),t?Object(fe.jsx)(_e,{}):Object(fe.jsx)(fe.Fragment,{children:n&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)(Fe.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(fe.jsx)("thead",{children:Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("th",{children:"Name"}),Object(fe.jsx)("th",{children:"Contact No"}),Object(fe.jsx)("th",{children:"Room No"}),Object(fe.jsx)("th",{children:"Attendance"})]})}),Object(fe.jsx)("tbody",{children:n&&Object.entries(n.details).map((e=>Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("th",{children:e[1].name}),Object(fe.jsx)("td",{children:e[1].contact}),Object(fe.jsx)("td",{children:e[1].roomNo}),Object(fe.jsx)("td",{children:n.data[e[0]]})]},e[0])))})]}),Object(fe.jsx)(st.CSVLink,{data:c,headers:d,filename:"attendance_".concat(Date().toString().substring(0,15),".csv"),className:"btn btn-primary",children:"Download"})]})})]})};var ct=()=>{const e=Object(r.b)(),[t,a]=Object(s.useState)(!1),[n,c]=Object(s.useState)(0),[o,d]=Object(s.useState)([]),[l,i]=Object(s.useState)(new Date),j=Object(r.c)((e=>e.attendanceAnalysis)),{attendance:b}=j,h=Object(r.c)((e=>e.attendanceDelete)),{loading:u,success:O,error:p}=h;Object(s.useEffect)((()=>{if(b){var t=o;Object.entries(b.details).map((e=>{t.push(e[0])})),d(t)}else e(at(l.toString().substring(0,15)))}),[b,e]);const x=()=>{a(!1)};return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)(Ee.a,{className:"flex justify-content-between",children:[Object(fe.jsx)(ve.Link,{to:"/",className:"btn btn-light my-3",children:"Go Back"}),Object(fe.jsx)("div",{style:{height:"40px",display:"flex"},children:Object(fe.jsx)(Je.a,{variant:"outline-danger",size:"sm",onClick:()=>{a(!0)},children:"Delete Attendance"})})]}),u&&Object(fe.jsx)(_e,{}),p&&Object(fe.jsx)(Ae,{variant:"success",children:p}),O&&Object(fe.jsx)(Ae,{variant:"success",children:"Attendance Deleted"}),Object(fe.jsxs)(Se.a,{children:[Object(fe.jsxs)(Ee.a,{children:[Object(fe.jsxs)(Se.a,{children:[Object(fe.jsx)(Ee.a,{children:"Analysis for "}),Object(fe.jsx)("strong",{children:l.toISOString().toString().substring(0,10)})]}),Object(fe.jsx)(Se.a,{children:Object(fe.jsx)(tt.a,{selected:l,onChange:t=>(t=>{e(at(t.toString().substring(0,15))),i(t)})(t)})})]}),Object(fe.jsxs)($e.a,{show:t,animation:!0,onHide:x,children:[Object(fe.jsx)($e.a.Header,{closeButton:!0,children:Object(fe.jsx)($e.a.Title,{children:"Enter Number of days before to delete"})}),Object(fe.jsx)($e.a.Body,{children:Object(fe.jsx)(Qe.a,{children:Object(fe.jsxs)(Qe.a.Group,{controlId:"days",children:[Object(fe.jsx)(Qe.a.Label,{children:"Enter no of days"}),Object(fe.jsx)(Qe.a.Control,{type:"number",placeholder:"Enter days",value:n,onChange:e=>c(e.target.value)})]})})}),Object(fe.jsxs)($e.a.Footer,{children:[Object(fe.jsx)(Je.a,{variant:"secondary",onClick:x,children:"Close"}),Object(fe.jsx)(Je.a,{variant:"outline-danger",onClick:()=>{a(!1),e((e=>async(t,a)=>{try{t({type:be});const{userLogin:{userInfo:s}}=a(),n={headers:{Authorization:"Bearer ".concat(s.token)}},{data:c}=await A.a.delete("/attendance/".concat(e),n);t({type:he,payload:c})}catch(s){t({type:ue,payload:s.response&&s.response.data.message?s.response.data.message:s.message})}})(n))},children:"Delete"})]})]}),Object(fe.jsx)(nt,{})]})]})};var rt=e=>{let{location:t,history:a}=e;const[n,c]=Object(s.useState)(""),[o,d]=Object(s.useState)(""),l=Object(r.b)(),i=Object(r.c)((e=>e.userLogin)),{loading:j,error:b,userInfo:h}=i,u=t.search?t.search.split("=")[1]:"/";Object(s.useEffect)((()=>{h&&a.push(u)}),[a,h,u]);return Object(fe.jsxs)(Xe,{children:[Object(fe.jsx)("h1",{children:"Sign In"}),b&&Object(fe.jsx)(Ae,{variant:"danger",children:b}),j&&Object(fe.jsx)(_e,{}),Object(fe.jsxs)(Qe.a,{onSubmit:e=>{e.preventDefault(),l(((e,t)=>async a=>{try{a({type:R});const s={headers:{"Content-Type":"application/json"}},{data:n}=await A.a.post("/users/login",{email:e,password:t},s);a({type:D,payload:n}),localStorage.setItem("userInfo",JSON.stringify(n))}catch(b){a({type:k,payload:b.response&&b.response.data.message?b.response.data.message:b.message})}})(n,o))},children:[Object(fe.jsxs)(Qe.a.Group,{controlId:"email",children:[Object(fe.jsx)(Qe.a.Label,{children:"Email Address"}),Object(fe.jsx)(Qe.a.Control,{type:"email",placeholder:"Enter email",value:n,onChange:e=>c(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"password",children:[Object(fe.jsx)(Qe.a.Label,{children:"Password"}),Object(fe.jsx)(Qe.a.Control,{type:"password",placeholder:"Enter password",value:o,onChange:e=>d(e.target.value)})]}),Object(fe.jsx)(Je.a,{type:"submit",variant:"primary",children:"Sign In"})]}),Object(fe.jsx)(Ee.a,{className:"py-3",children:Object(fe.jsxs)(Se.a,{children:["New Customer?"," ",Object(fe.jsx)(ve.Link,{to:u?"/register?redirect=".concat(u):"/register",children:"Register"})]})})]})};var ot=e=>{let{location:t,history:a}=e;const[n,c]=Object(s.useState)(""),[o,d]=Object(s.useState)(""),[l,i]=Object(s.useState)(""),[j,b]=Object(s.useState)(""),[h,u]=Object(s.useState)(null),O=Object(r.b)(),p=Object(r.c)((e=>e.userRegister)),{loading:x,error:g,userInfo:m}=p,y=t.search?t.search.split("=")[1]:"/";Object(s.useEffect)((()=>{m&&a.push(y)}),[a,m,y]);return Object(fe.jsxs)(Xe,{children:[Object(fe.jsx)("h1",{children:"Sign Up"}),h&&Object(fe.jsx)(Ae,{variant:"danger",children:h}),g&&Object(fe.jsx)(Ae,{variant:"danger",children:g}),x&&Object(fe.jsx)(_e,{}),Object(fe.jsxs)(Qe.a,{onSubmit:e=>{e.preventDefault(),l!==j?u("Passwords do not match"):O(((e,t,a)=>async s=>{try{s({type:F});const n={headers:{"Content-Type":"application/json"}},{data:c}=await A.a.post("/users",{name:e,email:t,password:a},n);s({type:G,payload:c}),s({type:D,payload:c}),localStorage.setItem("userInfo",JSON.stringify(c))}catch(g){s({type:P,payload:g.response&&g.response.data.message?g.response.data.message:g.message})}})(n,o,l))},children:[Object(fe.jsxs)(Qe.a.Group,{controlId:"name",children:[Object(fe.jsx)(Qe.a.Label,{children:"Name"}),Object(fe.jsx)(Qe.a.Control,{type:"name",placeholder:"Enter name",value:n,onChange:e=>c(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"email",children:[Object(fe.jsx)(Qe.a.Label,{children:"Email Address"}),Object(fe.jsx)(Qe.a.Control,{type:"email",placeholder:"Enter email",value:o,onChange:e=>d(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"password",children:[Object(fe.jsx)(Qe.a.Label,{children:"Password"}),Object(fe.jsx)(Qe.a.Control,{type:"password",placeholder:"Enter password",value:l,onChange:e=>i(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"confirmPassword",children:[Object(fe.jsx)(Qe.a.Label,{children:"Confirm Password"}),Object(fe.jsx)(Qe.a.Control,{type:"password",placeholder:"Confirm password",value:j,onChange:e=>b(e.target.value)})]}),Object(fe.jsx)(Je.a,{type:"submit",variant:"primary",children:"Register"})]}),Object(fe.jsx)(Ee.a,{className:"py-3",children:Object(fe.jsxs)(Se.a,{children:["Have an Account?"," ",Object(fe.jsx)(ve.Link,{to:y?"/login?redirect=".concat(y):"/login",children:"Login"})]})})]})},dt=a(270);var lt=e=>{let{match:t,history:a}=e;const[n,c]=Object(s.useState)(""),o=Object(r.b)(),d=Object(r.c)((e=>e.studentDetails)),{loading:l,error:i,student:j}=d,b=Object(r.c)((e=>e.studentUpdate)),{loading:h,error:u,success:O}=b,m=Object(r.c)((e=>e.studentDelete)),{loading:y,error:E,success:N}=m;Object(s.useEffect)((()=>{var e;N&&a.push("/"),O&&o({type:S}),j&&j._id&&j._id===t.params.id||o((e=t.params.id,async(t,a)=>{try{t({type:p});const{userLogin:{userInfo:s}}=a(),n={headers:{Authorization:"Bearer ".concat(s.token)}},{data:c}=await A.a.get("/student/".concat(e),n);t({type:x,payload:c})}catch(i){t({type:g,payload:i.response&&i.response.data.message?i.response.data.message:i.message})}})),j&&j._id&&!n&&c(j.status)}),[o,t,O,N]);return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(ve.Link,{className:"btn btn-light my-3",to:"/",children:"Go Back"}),l||h||y?Object(fe.jsx)(_e,{}):i?Object(fe.jsx)(Ae,{variant:"danger",children:i}):Object(fe.jsxs)(fe.Fragment,{children:[u&&Object(fe.jsx)(Ae,{variant:"danger",children:u}),E&&Object(fe.jsx)(Ae,{variant:"danger",children:E}),j&&Object(fe.jsxs)(Ee.a,{children:[Object(fe.jsx)(Se.a,{md:3,children:Object(fe.jsx)(ye.a,{src:j.image,alt:j.name,fluid:!0})}),Object(fe.jsx)(Se.a,{md:3,children:Object(fe.jsxs)(dt.a,{variant:"flush",children:[Object(fe.jsx)(dt.a.Item,{children:Object(fe.jsx)("h3",{children:j.name})}),Object(fe.jsx)(dt.a.Item,{children:Object(fe.jsxs)("span",{children:["Phone No:",j.contact]})}),Object(fe.jsx)(dt.a.Item,{children:Object(fe.jsxs)("span",{children:["Father Contact:",j.fatherContact]})}),Object(fe.jsx)(dt.a.Item,{children:Object(fe.jsxs)("span",{children:["City:",j.city]})}),Object(fe.jsx)(dt.a.Item,{children:Object(fe.jsxs)("span",{children:["Address:",j.address]})})]})}),Object(fe.jsx)(Se.a,{md:4,children:Object(fe.jsx)(me.a,{children:Object(fe.jsxs)(dt.a,{variant:"flush",children:[Object(fe.jsx)(dt.a.Item,{children:Object(fe.jsxs)(Ee.a,{children:[Object(fe.jsx)(Se.a,{children:"Room No:"}),Object(fe.jsxs)(Se.a,{children:[" ",j.roomNo]})]})}),Object(fe.jsx)(dt.a.Item,{children:Object(fe.jsxs)(Ee.a,{children:[Object(fe.jsx)(Se.a,{children:"Block No:"}),Object(fe.jsxs)(Se.a,{children:[" ",j.blockNo]})]})}),Object(fe.jsx)(dt.a.Item,{children:Object(fe.jsxs)(Ee.a,{children:[Object(fe.jsx)(Se.a,{children:"Status:"}),Object(fe.jsx)(Se.a,{children:Object(fe.jsx)(Qe.a.Control,{size:"sm",as:"select",value:n,onChange:e=>c(e.target.value),children:["Hostel","Outside","Home"].map((e=>Object(fe.jsx)("option",{value:e,children:e},e)))})})]})}),Object(fe.jsx)(dt.a.Item,{children:Object(fe.jsx)(Je.a,{className:"btn-block",type:"button",onClick:()=>{j.status=n,o(U(j))},children:"Update"})})]})})}),Object(fe.jsx)(Se.a,{children:Object(fe.jsx)(dt.a,{variant:"flush",children:Object(fe.jsxs)(Ee.a,{children:[Object(fe.jsx)(dt.a.Item,{variant:"secondary",children:Object(fe.jsx)(Je.a,{onClick:()=>{a.push({pathname:"/student/edit/".concat(j._id),state:{studentProps:j}})},children:Object(fe.jsx)("i",{className:"fas fa-edit"})})}),Object(fe.jsx)(dt.a.Item,{children:Object(fe.jsx)(Je.a,{variant:"danger",onClick:()=>{var e;window.confirm("Are you sure")&&o((e=j._id,async(t,a)=>{try{t({type:v});const{userLogin:{userInfo:s}}=a(),n={headers:{Authorization:"Bearer ".concat(s.token)}},{data:c}=await A.a.delete("/student/".concat(e),n);t({type:f,payload:c})}catch(i){t({type:T,payload:i.response&&i.response.data.message?i.response.data.message:i.message})}}))},children:Object(fe.jsx)("i",{className:"fas fa-trash"})})})]})})})]})]})]})};var it=e=>{let{students:t,attendanceMap:a,setAttendanceMap:n,attendance:c,roomNo:o}=e;const d=Object(r.b)();Object(s.useEffect)((()=>{}),[d,a]);return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)(Fe.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(fe.jsx)("thead",{children:Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("th",{children:"NAME"}),Object(fe.jsx)("th",{children:"Attendance"}),Object(fe.jsx)("th",{children:"STATUS"}),Object(fe.jsx)("th",{children:"CONTACT"}),Object(fe.jsx)("th",{children:"CITY"})]})}),Object(fe.jsx)("tbody",{children:t&&t.map((e=>Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("td",{children:Object(fe.jsx)(ve.Link,{to:"/student/".concat(e._id),children:e.name})}),Object(fe.jsx)("td",{children:Object(fe.jsx)(Qe.a,{children:Object(fe.jsx)(Qe.a.Group,{controlId:"status",children:Object(fe.jsxs)(Qe.a.Control,{as:"select",size:"sm",defaultValue:a[e._id],onChange:t=>{var s=a;s[e._id]=t.target.value,n(s)},children:[Object(fe.jsx)("option",{children:"Hostel"}),Object(fe.jsx)("option",{children:"Home"}),Object(fe.jsx)("option",{children:"outside"})]})})})}),Object(fe.jsx)("td",{children:Object(fe.jsx)("span",{style:{color:"Outside"===e.status?"red":"Home"===e.status?"blue":"black"},children:e.status})}),Object(fe.jsx)("td",{children:Object(fe.jsx)("a",{href:"tel:".concat(e.contact),children:e.contact})}),Object(fe.jsx)("td",{children:e.city})]},e._id)})))})]}),Object(fe.jsx)(Je.a,{variant:"success",onClick:()=>{c&&(c.roomNo.includes(o)||c.roomNo.push(o));const e=c?c.roomNo:o,s=a,n=c?c.details:{};t.map((e=>{n[e._id]={name:e.name,contact:e.contact,roomNo:e.roomNo}})),d((e=>async(t,a)=>{try{t({type:ce});const{userLogin:{userInfo:s}}=a(),n={headers:{Authorization:"Bearer ".concat(s.token)}},{data:c}=await A.a.post("/attendance/",e,n);t({type:re,payload:c})}catch(s){t({type:oe,payload:s.response&&s.response.data.message?s.response.data.message:s.message})}})({roomNo:e,details:n,data:s}))},children:"Update Attendance"})]})};var jt=e=>{let{roomNo:t}=e;const a=Object(r.b)(),[n,c]=Object(s.useState)({}),o=Object(r.c)((e=>e.getStudentsByRoomNo)),{loading:d,error:l,students:i,attendance:j}=o,b=Object(r.c)((e=>e.attendanceDataEnter)),{loading:h,error:u}=b;Object(s.useEffect)((()=>{i&&O()}),[a,j,n,i]);const O=()=>{if(j){var e=n;i.map((t=>{j.data[t._id]?e[t._id]=j.data[t._id]:e[t._id]="Hostel"})),c(n)}else i.map((e=>{var t=n;t[e._id]="Hostel",c(t)}));c(n)};return Object(fe.jsxs)(fe.Fragment,{children:[l&&Object(fe.jsx)(Ae,{variant:"danger",children:l}),d||h?Object(fe.jsx)(_e,{}):Object(fe.jsxs)(fe.Fragment,{children:[u&&Object(fe.jsx)(Ae,{variant:"danger",children:u}),i&&Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)(it,{students:i,attendanceMap:n,setAttendanceMap:c,attendance:j,roomNo:t})})]})]})};var bt=()=>{const[e,t]=Object(s.useState)(""),a=Object(r.b)();Object(s.useEffect)((()=>{}),[a]);const n=t=>{t.preventDefault(),a((e=>async(t,a)=>{try{t({type:N});const{userLogin:{userInfo:s}}=a(),n={headers:{Authorization:"Bearer ".concat(s.token)}},{data:c}=await A.a.get("/student/room/".concat(e),n);t({type:_,payload:c})}catch(s){t({type:C,payload:s.response&&s.response.data.message?s.response.data.message:s.message})}})(e))};return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("h2",{children:"Take Attendance"}),Object(fe.jsxs)(Qe.a,{onSubmit:n,inline:!0,children:[Object(fe.jsx)(Qe.a.Control,{type:"text",value:e,name:"roomNo",placeholder:"Enter RoomNo",className:"mr-sm-2 ml-sm-5",onChange:e=>(e=>{t(e.target.value)})(e)}),Object(fe.jsx)(Je.a,{type:"submit",onClick:n,children:"Get Students"})]}),Object(fe.jsx)(jt,{roomNo:e})]})};var ht=e=>{let{history:t}=e;const[a,n]=Object(s.useState)(""),[c,o]=Object(s.useState)(""),[d,l]=Object(s.useState)(""),[i,j]=Object(s.useState)(""),[b,h]=Object(s.useState)(null),u=Object(r.b)(),O=Object(r.c)((e=>e.userDetails)),{loading:p,error:x,user:g}=O,m=Object(r.c)((e=>e.userLogin)),{userInfo:y}=m,E=Object(r.c)((e=>e.userUpdateProfile)),{success:S}=E;Object(s.useEffect)((()=>{y?g&&g.name&&!S?(n(g.name),o(g.email)):(u({type:V}),u(qe("profile"))):t.push("/login")}),[u,t,y,g,S]);return Object(fe.jsx)(Ee.a,{children:Object(fe.jsxs)(Se.a,{md:3,children:[Object(fe.jsx)("h2",{children:"Profile"}),b&&Object(fe.jsx)(Ae,{variant:"danger",children:b}),S&&Object(fe.jsx)(Ae,{variant:"success",children:"Profile Updated"}),p?Object(fe.jsx)(_e,{}):x?Object(fe.jsx)(Ae,{variant:"danger",children:x}):Object(fe.jsxs)(Qe.a,{onSubmit:e=>{e.preventDefault(),d!==i?h("Passwords do not match"):u((e=>async(t,a)=>{try{t({type:Q});const{userLogin:{userInfo:s}}=a(),n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},{data:c}=await A.a.put("/users/profile",e,n);t({type:J,payload:c}),t({type:D,payload:c}),localStorage.setItem("userInfo",JSON.stringify(c))}catch(x){const a=x.response&&x.response.data.message?x.response.data.message:x.message;"Not authorized, token failed"===a&&t(Ve()),t({type:Y,payload:a})}})({id:g._id,name:a,email:c,password:d}))},children:[Object(fe.jsxs)(Qe.a.Group,{controlId:"name",children:[Object(fe.jsx)(Qe.a.Label,{children:"Name"}),Object(fe.jsx)(Qe.a.Control,{type:"name",placeholder:"Enter name",value:a,onChange:e=>n(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"email",children:[Object(fe.jsx)(Qe.a.Label,{children:"Email Address"}),Object(fe.jsx)(Qe.a.Control,{type:"email",placeholder:"Enter email",value:c,onChange:e=>o(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"password",children:[Object(fe.jsx)(Qe.a.Label,{children:"Password"}),Object(fe.jsx)(Qe.a.Control,{type:"password",placeholder:"Enter password",value:d,onChange:e=>l(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"confirmPassword",children:[Object(fe.jsx)(Qe.a.Label,{children:"Confirm Password"}),Object(fe.jsx)(Qe.a.Control,{type:"password",placeholder:"Confirm password",value:i,onChange:e=>j(e.target.value)})]}),Object(fe.jsx)(Je.a,{type:"submit",variant:"primary",children:"Update"})]})]})})};var ut=e=>{let{history:t}=e;const a=Object(r.b)(),n=Object(r.c)((e=>e.userList)),{loading:c,error:o,users:d}=n,l=Object(r.c)((e=>e.userLogin)),{userInfo:i}=l,j=Object(r.c)((e=>e.userDelete)),{success:b}=j;Object(s.useEffect)((()=>{i&&i.isAdmin?a((async(e,t)=>{try{e({type:q});const{userLogin:{userInfo:a}}=t(),s={headers:{Authorization:"Bearer ".concat(a.token)}},{data:n}=await A.a.get("/users",s);e({type:W,payload:n})}catch(o){const a=o.response&&o.response.data.message?o.response.data.message:o.message;"Not authorized, token failed"===a&&e(Ve()),e({type:K,payload:a})}})):t.push("/login")}),[a,t,b,i]);const h=e=>{window.confirm("Are you sure")&&a((e=>async(t,a)=>{try{t({type:Z});const{userLogin:{userInfo:s}}=a(),n={headers:{Authorization:"Bearer ".concat(s.token)}};await A.a.delete("/users/".concat(e),n),t({type:$})}catch(o){const a=o.response&&o.response.data.message?o.response.data.message:o.message;"Not authorized, token failed"===a&&t(Ve()),t({type:ee,payload:a})}})(e))};return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("h1",{children:"Users"}),c?Object(fe.jsx)(_e,{}):o?Object(fe.jsx)(Ae,{variant:"danger",children:o}):Object(fe.jsxs)(Fe.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(fe.jsx)("thead",{children:Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("th",{children:"ID"}),Object(fe.jsx)("th",{children:"NAME"}),Object(fe.jsx)("th",{children:"EMAIL"}),Object(fe.jsx)("th",{children:"ADMIN"}),Object(fe.jsx)("th",{})]})}),Object(fe.jsx)("tbody",{children:d.map((e=>Object(fe.jsxs)("tr",{children:[Object(fe.jsx)("td",{children:e._id}),Object(fe.jsx)("td",{children:e.name}),Object(fe.jsx)("td",{children:Object(fe.jsx)("a",{href:"mailto:".concat(e.email),children:e.email})}),Object(fe.jsx)("td",{children:e.isAdmin?Object(fe.jsx)("i",{className:"fas fa-check",style:{color:"green"}}):Object(fe.jsx)("i",{className:"fas fa-times",style:{color:"red"}})}),Object(fe.jsxs)("td",{children:[Object(fe.jsx)(Ue.LinkContainer,{to:"/user/".concat(e._id,"/edit"),children:Object(fe.jsx)(Je.a,{variant:"light",className:"btn-sm",children:Object(fe.jsx)("i",{className:"fas fa-edit"})})}),Object(fe.jsx)(Je.a,{variant:"danger",className:"btn-sm",onClick:()=>h(e._id),children:Object(fe.jsx)("i",{className:"fas fa-trash"})})]})]},e._id)))})]})]})};var Ot=e=>{let{match:t,history:a}=e;const n=t.params.userId,[c,o]=Object(s.useState)(""),[d,l]=Object(s.useState)(""),[i,j]=Object(s.useState)(!1),b=Object(r.b)(),h=Object(r.c)((e=>e.userDetails)),{loading:u,error:O,user:p}=h,x=Object(r.c)((e=>e.userUpdate)),{loading:g,error:m,success:y}=x;Object(s.useEffect)((()=>{console.log(n),y?(b({type:ne}),a.push("/userList")):p&&p.name&&p._id===n?(o(p.name),l(p.email),j(p.isAdmin)):b(qe(n))}),[b,a,n,p,y]);return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(ve.Link,{to:"/admin/userList",className:"btn btn-light my-3",children:"Go Back"}),Object(fe.jsxs)(Xe,{children:[Object(fe.jsx)("h1",{children:"Edit User"}),g&&Object(fe.jsx)(_e,{}),m&&Object(fe.jsx)(Ae,{variant:"danger",children:m}),u?Object(fe.jsx)(_e,{}):O?Object(fe.jsx)(Ae,{variant:"danger",children:O}):Object(fe.jsxs)(Qe.a,{onSubmit:e=>{e.preventDefault(),b((e=>async(t,a)=>{try{t({type:te});const{userLogin:{userInfo:s}}=a(),n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},{data:c}=await A.a.put("/users/".concat(e._id),e,n);t({type:ae}),t({type:z,payload:c}),t({type:H})}catch(O){const a=O.response&&O.response.data.message?O.response.data.message:O.message;"Not authorized, token failed"===a&&t(Ve()),t({type:se,payload:a})}})({_id:n,name:c,email:d,isAdmin:i}))},children:[Object(fe.jsxs)(Qe.a.Group,{controlId:"name",children:[Object(fe.jsx)(Qe.a.Label,{children:"Name"}),Object(fe.jsx)(Qe.a.Control,{type:"name",placeholder:"Enter name",value:c,onChange:e=>o(e.target.value)})]}),Object(fe.jsxs)(Qe.a.Group,{controlId:"email",children:[Object(fe.jsx)(Qe.a.Label,{children:"Email Address"}),Object(fe.jsx)(Qe.a.Control,{type:"email",placeholder:"Enter email",value:d,onChange:e=>l(e.target.value)})]}),Object(fe.jsx)(Qe.a.Group,{controlId:"isadmin",children:Object(fe.jsx)(Qe.a.Check,{type:"checkbox",label:"Is Admin",checked:i,onChange:e=>j(e.target.checked)})}),Object(fe.jsx)(Je.a,{type:"submit",variant:"primary",children:"Update"})]})]})]})};var pt=()=>Object(fe.jsxs)(ve.BrowserRouter,{children:[Object(fe.jsx)(We,{}),Object(fe.jsx)("main",{className:"py-3",children:Object(fe.jsxs)(De.a,{children:[Object(fe.jsx)(Be.d,{path:"/user/:userId/edit",component:Ot}),Object(fe.jsx)(Be.d,{path:"/userList",component:ut}),Object(fe.jsx)(Be.d,{path:"/profile",component:ht}),Object(fe.jsx)(Be.d,{path:"/attendance",component:bt}),Object(fe.jsx)(Be.d,{path:"/analysis",component:ct}),Object(fe.jsx)(Be.d,{path:"/addStudent",component:Ze}),Object(fe.jsx)(Be.d,{path:"/student/edit/:id",component:Ze,exact:!0}),Object(fe.jsx)(Be.d,{path:"/student/:id",component:lt,exact:!0}),Object(fe.jsx)(Be.d,{path:"/login",component:rt,exact:!0}),Object(fe.jsx)(Be.d,{path:"/register",component:ot,exact:!0}),Object(fe.jsx)(Be.d,{path:"/search/:keyword",component:Pe,exact:!0}),Object(fe.jsx)(Be.d,{path:"/page/:pageNumber",component:Pe,exact:!0}),Object(fe.jsx)(Be.d,{path:"/search/:keyword/page/:pageNumber",component:Pe,exact:!0}),Object(fe.jsx)(Be.d,{path:"/",component:Pe,exact:!0})]})}),Object(fe.jsx)(Ke,{})]});var xt=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,271)).then((t=>{let{getCLS:a,getFID:s,getFCP:n,getLCP:c,getTTFB:r}=t;a(e),s(e),n(e),c(e),r(e)}))};a(247);c.a.render(Object(fe.jsx)(r.a,{store:ge,children:Object(fe.jsx)(pt,{})}),document.getElementById("root")),xt()}},[[249,1,2]]]);
//# sourceMappingURL=main.85a1f9fb.chunk.js.map